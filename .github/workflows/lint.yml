name: Lint

on: workflow_call

jobs:
  yamllint:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - name: Yamllint
        uses: SkynetLabs/.github/actions/yamllint@master

  syntax_check:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2

      - name: Check playbooks with --syntax-check
        run: make syntax-check

  ansible-lint:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2

      - name: Lint Ansible Playbook
        uses: ansible/ansible-lint-action@main
